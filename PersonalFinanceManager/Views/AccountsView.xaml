<UserControl x:Class="PersonalFinanceManager.Views.AccountsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             >

    <StackPanel>
        <Border Background="{StaticResource CardBrush}"
                CornerRadius="14"
                Padding="20"
                Margin="10">

            <StackPanel>
                <TextBlock Text="Добавить счет"
                           FontSize="18"
                           FontWeight="Bold"
                           Margin="0 0 0 12"/>
                
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBox Grid.Column="0" Grid.Row="0"
                             Text="{Binding NewAccountName}"/>

                    <ComboBox Grid.Column="1" Grid.Row="0"
                              Margin="10,10,10,10"
                              Height="30" Padding="6"
                              ItemsSource="{Binding AccountTypes}"
                              SelectedItem="{Binding SelectedAccountType}"/>

                    <TextBox Grid.Column="2" Grid.Row="0"
                             Text="{Binding InitialBalance}"/>

                    <Button Grid.Column="3" Grid.Row="0"
                            Content="Добавить"
                            Command="{Binding AddAccountCommand}"
                            Margin="10 0 0 0" Width="100" Height="30"/>

                    <Button Grid.Row="1" Grid.Column="0"
                            Margin="10,10,10,10"
                            Height="30" Padding="6"
                            Content="Баланс ↑↓"
                            Command="{Binding ToggleSortByBalanceCommand}" />
                </Grid>
            </StackPanel>
        </Border>
        <ScrollViewer>
            <ItemsControl ItemsSource="{Binding AccountsView}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="{StaticResource CardBrush}"
                                CornerRadius="14"
                                Padding="16"
                                Margin="10"
                                Width="260">

                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                    <RowDefinition/>
                                </Grid.RowDefinitions>
                                
                                <StackPanel>

                                    <TextBlock Text="{Binding Name}"
                                               FontSize="14"
                                               Foreground="{StaticResource TextSecondaryBrush}"
                                               />

                                    <TextBlock Text="{Binding Balance, StringFormat={}{0:N2} ₽}"
                                               FontSize="22"
                                               FontWeight="Bold"
                                               Foreground="{StaticResource TextBrush}"
                                               Margin="0 8 0 0"
                                               />
                                    <TextBlock Text="{Binding AccountType}"
                                               FontSize="12"
                                               Foreground="{StaticResource CardBrush}"
                                               Margin="0 4 0 0"
                                               Background="{Binding Color}"/>
                                    
                                </StackPanel>

                                <Button Grid.Row="1"
                                        Content="Удалить"
                                        Command="{Binding DataContext.DeleteAccountCommand,
                                                  RelativeSource={RelativeSource AncestorType=UserControl}}"
                                        CommandParameter="{Binding}"
                                        HorizontalAlignment="Right"
                                        Margin="0 10 0 0" Height="20" Width="60"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

    </StackPanel>

</UserControl>
