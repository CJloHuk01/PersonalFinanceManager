<UserControl x:Class="PersonalFinanceManager.Views.CategoriesView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>


        <Border Background="{StaticResource CardBrush}"
                CornerRadius="14"
                Padding="20"
                Margin="0 0 0 20">

            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBox Width="200"
                         Margin="0 0 10 0"
                         Text="{Binding NewCategoryName, UpdateSourceTrigger=PropertyChanged}"
                         />

                <ComboBox Width="120"
                          Margin="10 10 10 10"
                          Padding="6"
                          ItemsSource="{Binding TransactionTypes}"
                          SelectedItem="{Binding SelectedTransactionType}" Height="30"/>

                <Button Content="Добавить"
                        Command="{Binding AddCategoryCommand}"
                        Padding="14 6" Width="100" Height="30"/>

                <Button Padding="14 6" Width="100" Height="30"
                        Content="{Binding FilterButtonText}"
                        Command="{Binding ToggleCategoryFilterCommand}"
                        Margin="10 0 10 0"/>

            </StackPanel>
        </Border>

        <ScrollViewer Grid.Row="1">
            <ItemsControl ItemsSource="{Binding Categories}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="{StaticResource CardBrush}"
                                CornerRadius="14"
                                Padding="16"
                                Margin="10"
                                Width="220">

                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <StackPanel>
                                    <TextBlock Text="{Binding Name}"
                                               FontSize="15"
                                               FontWeight="SemiBold"/>

                                    <TextBlock Text="{Binding CategoryType}"
                                               FontSize="12"
                                               Foreground="{StaticResource CardBrush}"
                                               Background="{Binding Color}"/>
                                </StackPanel>

                                <Button Grid.Row="1"
                                        Content="Удалить"
                                        Margin="0 10 0 0"
                                        Command="{Binding DataContext.DeleteCategoryCommand,
                                                  RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                        CommandParameter="{Binding}"
                                        HorizontalAlignment="Right"
                                        Height="20" Width="60"/>   
                            </Grid>
                        </Border>
                    </DataTemplate>

                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

    </Grid>
</UserControl>
